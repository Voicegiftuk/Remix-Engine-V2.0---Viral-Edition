name: Titan Full Automation

on:
  schedule:
    - cron: '0 10 * * *'
  workflow_dispatch:

jobs:
  generate-deploy:
    runs-on: ubuntu-latest
    timeout-minutes: 60
    
    steps:
      - uses: actions/checkout@v4
      
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: Install dependencies
        run: |
          pip install --upgrade pip
          pip install requests pillow
      
      - name: Generate content
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
          UNSPLASH_ACCESS_KEY: ${{ secrets.UNSPLASH_ACCESS_KEY }}
          PEXELS_API_KEY: ${{ secrets.PEXELS_API_KEY }}
        run: |
          python titan_master_orchestrator_v2.py
      
      - name: Generate RSS feed
        run: |
          python scripts/generate_podcast_rss.py || true
      
      - name: Create symlink for Vercel
        run: |
          LATEST=$(ls -dt TITAN_OUTPUT_* | head -1)
          ln -s "$LATEST" TITAN_OUTPUT_latest
      
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: '--prod'
      
      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: titan-output-${{ github.run_number }}
          path: TITAN_OUTPUT_*
          retention-days: 30
      
      - name: Success notification
        if: success()
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=‚úÖ <b>Titan Complete!</b>%0A%0Aüìù {10} articles live%0Aüåê <a href='https://dashboard.sayplay.co.uk'>View Dashboard</a>%0Aüìö <a href='https://dashboard.sayplay.co.uk/blog'>View Blog</a>" || true
      
      - name: Failure notification
        if: failure()
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=‚ùå <b>Titan Failed</b>%0A%0A<a href='https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}'>View Logs</a>" || true
```

**Commit:** "Add GitHub workflow"

---

## ‚úÖ PODSUMOWANIE - 5 PLIK√ìW DO COMMIT
```
‚úÖ vercel.json
‚úÖ titan_modules/core/multi_topic_generator.py
‚úÖ scripts/generate_podcast_rss.py
‚úÖ titan_master_orchestrator_v2.py
‚úÖ .github/workflows/titan_full_automation.yml
```

---

## üöÄ PO COMMIT WSZYSTKICH PLIK√ìW

### **RUN WORKFLOW:**

1. **GitHub ‚Üí Actions**
2. **"Titan Full Automation"**
3. **"Run workflow"** dropdown
4. **Select branch:** main
5. **Click:** "Run workflow"

---

## üéØ CO ZOBACZYSZ PO 5-10 MINUTACH
```
‚úÖ https://dashboard.sayplay.co.uk ‚Üí Dashboard
‚úÖ https://dashboard.sayplay.co.uk/blog/perfect-birthday-gifts-for-mum-2025 ‚Üí Article
‚úÖ https://dashboard.sayplay.co.uk/podcast.xml ‚Üí RSS Feed
