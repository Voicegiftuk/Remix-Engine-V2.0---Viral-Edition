name: Titan Complete Enhanced System

on:
  # Daily automation at 10:00 AM UTC
  schedule:
    - cron: '0 10 * * *'
  
  # Manual trigger button (Run workflow)
  workflow_dispatch:

jobs:
  titan_enhanced_automation:
    name: Run Enhanced Titan System
    runs-on: ubuntu-latest
    timeout-minutes: 30
    
    steps:
      # ============================================================
      # STEP 1: Checkout code
      # ============================================================
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v3
      
      # ============================================================
      # STEP 2: Setup Python
      # ============================================================
      - name: ğŸ Setup Python 3.11
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
          cache: 'pip'
      
      # ============================================================
      # STEP 3: Install ALL dependencies
      # ============================================================
      - name: ğŸ“¦ Install dependencies
        run: |
          echo "Installing Python packages..."
          pip install --upgrade pip
          pip install google-generativeai requests beautifulsoup4 pillow python-dotenv python-slugify pytz edge-tts
          echo "âœ… All dependencies installed"
      
      # ============================================================
      # STEP 4: Run Enhanced Titan Orchestrator
      # ============================================================
      - name: ğŸš€ Run Enhanced Titan System
        env:
          # Core APIs (FREE)
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          
          # Communication (FREE tier)
          SENDGRID_API_KEY: ${{ secrets.SENDGRID_API_KEY }}
          
          # Social Media (FREE)
          PINTEREST_ACCESS_TOKEN: ${{ secrets.PINTEREST_ACCESS_TOKEN }}
          PINTEREST_BOARD_ID: ${{ secrets.PINTEREST_BOARD_ID }}
          PINTEREST_TOKEN: ${{ secrets.PINTEREST_TOKEN }}
          
          # Google Maps APIs (Enhanced Features - $200 FREE credit)
          GOOGLE_MAPS_API_KEY: ${{ secrets.GOOGLE_MAPS_API_KEY }}
        run: |
          echo "ğŸš€ Starting Enhanced Titan System..."
          echo "Mode: Enhanced with Google Maps APIs"
          echo "Time: $(date)"
          echo ""
          python titan_master_orchestrator_zero_cost.py
      
      # ============================================================
      # STEP 5: Success notification
      # ============================================================
      - name: âœ… Send success notification
        if: success()
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d "text=âœ… Titan Enhanced workflow completed successfully! Check main notification for details." \
            -d "parse_mode=HTML"
      
      # ============================================================
      # STEP 6: Failure notification
      # ============================================================
      - name: âŒ Send failure notification
        if: failure()
        run: |
          WORKFLOW_URL="https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}"
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d "text=âŒ Titan Enhanced workflow failed!%0A%0ACheck logs: ${WORKFLOW_URL}" \
            -d "parse_mode=HTML"
      
      # ============================================================
      # STEP 7: Upload logs on failure (for debugging)
      # ============================================================
      - name: ğŸ“‹ Upload failure logs
        if: failure()
        uses: actions/upload-artifact@v3
        with:
          name: titan-error-logs
          path: |
            *.log
            *.json
          retention-days: 7
          if-no-files-found: ignore
```

---

## ğŸš€ JAK DODAÄ† TEN WORKFLOW

### **METODA 1: Przez GitHub UI (Åatwiejsza)**

1. **GitHub â†’ Twoje repo**

2. **Navigate:**
```
   .github/workflows/
```

3. **Create new file:**
   - Click "Add file" â†’ "Create new file"
   - Name: `titan_complete_enhanced.yml`
   - Paste kod z gÃ³ry
   - Commit: "Add complete enhanced Titan workflow"

**DONE! âœ…**

---

### **METODA 2: Replace istniejÄ…cego pliku**

1. **GitHub â†’ `.github/workflows/daily_titan_content.yml`**

2. **Edit file:**
   - Click "Edit" (oÅ‚Ã³wek)
   - Delete wszystko
   - Paste kod z gÃ³ry
   - Commit: "Update to complete enhanced workflow"

**DONE! âœ…**

---

## ğŸ¯ CO TEN WORKFLOW ROBI

### **Automatycznie (codziennie):**
```
â° 10:00 AM UTC kaÅ¼dego dnia:
  â†“
âœ… Checkout code
âœ… Setup Python 3.11
âœ… Install all dependencies
âœ… Run titan_master_orchestrator_zero_cost.py
âœ… Send Telegram notification
```

### **Manual (kiedy chcesz):**
```
ğŸ‘† Click "Run workflow" button:
  â†“
âœ… Same process natychmiast!
```

### **Error handling:**
```
âŒ JeÅ›li coÅ› fail:
  â†“
âœ… Telegram notification z linkiem do logs
âœ… Upload error logs (moÅ¼na pobraÄ‡)
âœ… Easy debugging
```

---

## ğŸ“Š CO DOKÅADNIE URUCHOMI

**Ten workflow uruchomi:**
```
TITAN MASTER ORCHESTRATOR - ENHANCED MODE
â”œâ”€â”€ Module #1: Brand Identity
â”œâ”€â”€ Module #2: Blog Engine (Gemini FREE)
â”œâ”€â”€ Module #4: Image Engine (Pollinations FREE)
â”œâ”€â”€ Module #5: Audio-Inception (Edge-TTS FREE)
â”œâ”€â”€ Module #6: Global Domination (Gemini FREE)
â”œâ”€â”€ Module #7: Programmatic SEO
â”œâ”€â”€ Module #8: Social Poster
â”œâ”€â”€ Module #9: B2B Hunter âœ¨ ENHANCED
â”‚   â””â”€â”€ with location maps!
â”œâ”€â”€ Module #10: Influencer Scout
â”œâ”€â”€ Module #11: Neuro-Pricing
â”œâ”€â”€ Module #12: Chameleon Landing
â”œâ”€â”€ Module #13: Gift Precognition âœ¨ ENHANCED
â”‚   â””â”€â”€ with timezone awareness!
â””â”€â”€ Module #14: Address Validation âœ¨ NEW
    â””â”€â”€ prevents failed deliveries!

ğŸ“± Telegram notification with full summary
```

---

## âœ… VERIFICATION CHECKLIST

**Po dodaniu workflow, sprawdÅº:**

### **â˜ Workflow visible:**
- [ ] GitHub â†’ Actions tab
- [ ] See "Titan Complete Enhanced System" w liÅ›cie

### **â˜ Manual trigger available:**
- [ ] Click na workflow
- [ ] See "Run workflow" button (dropdown)
- [ ] âœ… = Ready to run!

### **â˜ Schedule active:**
- [ ] Workflow bÄ™dzie dziaÅ‚aÄ‡ daily o 10:00 UTC
- [ ] Check: "This workflow has a workflow_dispatch event trigger"

---

## ğŸš€ FIRST RUN - STEP BY STEP

### **1. ZnajdÅº workflow (1 min):**
```
GitHub â†’ Actions â†’ "Titan Complete Enhanced System"
```

### **2. Kliknij Run (5 sekund):**
```
Right side: "Run workflow" dropdown
Click: "Run workflow" green button
```

### **3. Watch progress (12 min):**
```
Å»Ã³Å‚te kÃ³Å‚ko = Running...
Zielony checkmark = SUCCESS! âœ…
Czerwony X = Failed âŒ
```

### **4. Check Telegram (instant):**
```
Po 12 minutach:
ğŸ“± "âœ… ENHANCED TITAN COMPLETE âœ¨"
+ Detailed summary
```

### **5. Verify logs (2 min):**
```
Click na run
Expand steps
See all output
```

---

## ğŸ’° KOSZTY

**Z tym workflow:**
```
FREE APIs:
âœ… Pollinations.ai (images)     Â£0
âœ… Gemini (text/translations)   Â£0
âœ… Edge-TTS (voices)            Â£0
âœ… SendGrid (100 emails/day)    Â£0

Google APIs (from $200 FREE credit):
âœ… Places API                   ~$0.32/day
âœ… Maps Static API              ~$0.06/day
âœ… Time Zone API                ~$0.05/day
âœ… Address Validation           ~$0.05/day
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TOTAL:                          ~$0.50/day = Â£9.40/month
FREE CREDIT:                    $200/month
REMAINING:                      $185/month unused! ğŸ‰
```

---

## ğŸŠ COMPARE: Old vs New

### **OLD (Multiple workflows, confusion):**
```
âŒ daily_titan_content.yml
âŒ safe_daily_content.yml
âŒ KtÃ³re wybraÄ‡?
âŒ KtÃ³re ma co?
âŒ Confusion!
```

### **NEW (One workflow, wszystko):**
```
âœ… titan_complete_enhanced.yml
âœ… All features
âœ… All APIs
âœ… Clear & simple
âœ… Just click Run!
